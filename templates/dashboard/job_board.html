{% extends "dashboard/layout.html" %}
{% block title %}Jobs Center - TechNest{% endblock %}
{% block header_title %}Smart Job Feed{% endblock %}

{% block header_subtitle %}
<p class="text-muted small mb-0">Opportunities matched to your specific skill set.</p>
{% endblock %}
{% block header_actions %}

{% endblock %}
{% block content %}
<div class="container-fluid p-4">


    <div class="row g-4">
        {% for job in jobs %}
        <div class="col-lg-6">
            <div class="card border-0 shadow-sm h-100 p-4">
                <div class="d-flex align-items-center mb-3">
                    <img src="{{ job.company_logo}}"
                        alt="Logo" class="rounded-3 me-3" style="width: 50px; height: 50px; object-fit: cover;">

                    <div>
                        <a href="{{ url_for('view_member_profile', member_id=job.member_id, role='company') }}"
                            class="text-decoration-none">
                            <h6 class="fw-bold mb-0 text-primary">{{ job.company_name }} <i
                                    class="bi bi-arrow-up-right x-small"></i></h6>
                        </a>
                        <span class="text-muted x-small">Posted {{ job.created_at.strftime('%d %b') }}</span>
                    </div>

                    <div class="ms-auto text-end">
                        <span class="badge bg-light text-dark border small">{{ job.days_left }}d remaining</span>
                    </div>
                </div>
                  <div class="d-flex gap-3 mb-3 mt-1">
                  
                    <span class="text-primary small fw-bold">
                        <i class="bi {% if job.job_type == 'Remote' %}bi-house-heart{% elif job.job_type == 'Internship' %}bi-mortarboard{% else %}bi-briefcase{% endif %} me-1"></i>
                        {{ job.job_type }}
                    </span>
                </div>
                <h5 class="fw-bold mb-2">{{ job.job_role }}</h5>
                <p class="text-muted small mb-4" style="line-height: 1.5;">{{ job.job_description[:200] }}...</p>

                <div class="mb-4">
                    <p class="x-small fw-bold text-uppercase text-muted mb-2 ls-1">Required Skills</p>
                    <div class="d-flex flex-wrap gap-1">
                        {% for skill in job.all_skills.split(', ') %}
                        <span class="badge bg-primary-subtle text-primary border-0" style="font-size: 0.7rem;">{{ skill
                            }}</span>
                        {% endfor %}
                    </div>
                </div>

                <div class="mt-auto">
                    <a href="{{ job.external_link }}" target="_blank" class="btn btn-primary w-100 shadow-sm">
                        Apply on Company Site <i class="bi bi-box-arrow-up-right ms-2"></i>
                    </a>
                </div>
            </div>
        </div>
        {% else %}
        <div class="col-12 text-center py-5">
            <div class="bg-light p-5 rounded-4 border border-dashed">
                <i class="bi bi-search fs-1 text-muted"></i>
                <h5 class="mt-3 text-muted">No matches yet</h5>
                <p class="text-muted small">Add more skills to your profile to unlock more job opportunities.</p>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}